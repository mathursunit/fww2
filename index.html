<!DOCTYPE html>

<html lang="en">

<head>
  <link href="manifest.json" rel="manifest" />
  <meta content="#6aaa64" name="theme-color" />
  <meta charset="utf-8" />
  <meta content="width=device-width, initial-scale=1, viewport-fit=cover" name="viewport" />
  <title>Fun with words</title>
  <link href="https://cdn.jsdelivr.net/gh/resir014/Clear-Sans-Webfont@v1.1.1/css/clear-sans.css" rel="stylesheet" />
  <link href="style.css" rel="stylesheet" />
  <link href="logo_black.png" rel="apple-touch-icon" />
  <link href="favicon.png" rel="icon" type="image/png" />
  <meta content="yes" name="mobile-web-app-capable" />
  <meta content="yes" name="apple-mobile-web-app-capable" />
  <meta content="SunSar" name="apple-mobile-web-app-title" />
  <meta content="default" name="apple-mobile-web-app-status-bar-style" />

  <link href="splash/launch-640x1136.png" media="(device-width: 320px)" rel="apple-touch-startup-image" />
  <link href="splash/launch-750x1334.png" media="(device-width: 375px)" rel="apple-touch-startup-image" />
  <link href="splash/launch-1242x2208.png" media="(device-width: 414px)" rel="apple-touch-startup-image" />
  <link href="splash/launch-1536x2048.png" media="(device-width: 768px)" rel="apple-touch-startup-image" />
  <link href="splash/launch-1668x2224.png" media="(device-width: 834px)" rel="apple-touch-startup-image" />
  <link href="splash/launch-2048x2732.png" media="(device-width: 1024px)" rel="apple-touch-startup-image" />
</head>

<body tabindex="0">

  <!-- Toast container -->
  <div id="dynamic-bg" class="dynamic-bg"></div>
  <div id="toast-container"></div>
  <div class="game-container">
    <div class="game-header">
      <div class="header-top">
        <div class="logo">
          <div class="logo-main">
            <span class="logo-orange">Sun</span><span class="logo-blue">Sar</span>
            <span class="sun-icon">üåû</span>
          </div>
          <div class="logo-sub">Fun with words</div>
        </div>
        <div id="game-date" class="game-date" title="Puzzle Archive" style="cursor: pointer"></div>
      </div>

      <div class="header-controls">
        <button id="auth-btn" title="Login / Profile">üë§</button>
        <button id="stats-btn" title="View Statistics">üìä</button>
        <button id="hint-btn" title="Hint: Reveals one correct letter (Once per game)">üí°</button>
        <div class="mode-selector">
          <button class="mode-btn" data-mode="4" title="4 Letters">4</button>
          <button class="mode-btn active" data-mode="5" title="5 Letters">5</button>
          <button class="mode-btn" data-mode="6" title="6 Letters">6</button>
        </div>
        <button id="theme-btn" title="Toggle Light/Dark Mode">üåô</button>
        <button id="settings-btn" title="Game Settings">‚öôÔ∏è</button>
        <button id="help-btn" title="How to Play & Color Help">‚ùì</button>
      </div>

    </div>
  </div>

  <div id="grid">
    <div class="row">
      <div class="tile"></div>
      <div class="tile"></div>
      <div class="tile"></div>
      <div class="tile"></div>
      <div class="tile"></div>
    </div>
    <div class="row">
      <div class="tile"></div>
      <div class="tile"></div>
      <div class="tile"></div>
      <div class="tile"></div>
      <div class="tile"></div>
    </div>
    <div class="row">
      <div class="tile"></div>
      <div class="tile"></div>
      <div class="tile"></div>
      <div class="tile"></div>
      <div class="tile"></div>
    </div>
    <div class="row">
      <div class="tile"></div>
      <div class="tile"></div>
      <div class="tile"></div>
      <div class="tile"></div>
      <div class="tile"></div>
    </div>
    <div class="row">
      <div class="tile"></div>
      <div class="tile"></div>
      <div class="tile"></div>
      <div class="tile"></div>
      <div class="tile"></div>
    </div>
    <div class="row">
      <div class="tile"></div>
      <div class="tile"></div>
      <div class="tile"></div>
      <div class="tile"></div>
      <div class="tile"></div>
    </div>
  </div>

  <div id="keyboard">
    <div class="key-row">
      <button class="key">Q</button><button class="key">W</button><button class="key">E</button><button
        class="key">R</button><button class="key">T</button><button class="key">Y</button><button
        class="key">U</button><button class="key">I</button><button class="key">O</button><button class="key">P</button>
    </div>
    <div class="key-row">
      <button class="key">A</button><button class="key">S</button><button class="key">D</button><button
        class="key">F</button><button class="key">G</button><button class="key">H</button><button
        class="key">J</button><button class="key">K</button><button class="key">L</button>
    </div>
    <div class="key-row">
      <button class="key action" data-key="BACKSPACE">‚å´</button><button class="key">Z</button><button
        class="key">X</button><button class="key">C</button><button class="key">V</button><button
        class="key">B</button><button class="key">N</button><button class="key">M</button><button
        class="key action" id="mic-btn" title="Voice Input">üéôÔ∏è</button><button class="key action" data-key="ENTER">Enter</button>
    </div>
  </div>

  <div id="countdown">Next word in 00:00:00</div>
  </div>

  <!-- Stats Modal -->
  <div class="modal-overlay" id="stats-modal">
    <div class="modal-content">
      <button class="close-btn">&times;</button>
      <div class="stats-container">

        <!-- Big Stats -->
        <div>
          <div class="stats-header">
            Statistics
            <div class="mode-selector stats-mode-selector">
              <button class="mode-btn stats-mode-btn" data-mode="4">4</button>
              <button class="mode-btn stats-mode-btn active" data-mode="5">5</button>
              <button class="mode-btn stats-mode-btn" data-mode="6">6</button>
            </div>
          </div>
          <div class="stats-grid">
            <div class="stat-box">
              <div class="stat-val" id="stat-played">0</div>
              <div class="stat-label">Played</div>
            </div>
            <div class="stat-box">
              <div class="stat-val" id="stat-win">0</div>
              <div class="stat-label">Win %</div>
            </div>
            <div class="stat-box">
              <div class="stat-val" id="stat-streak">0</div>
              <div class="stat-label">Current Streak</div>
            </div>
            <div class="stat-box">
              <div class="stat-val" id="stat-max">0</div>
              <div class="stat-label">Max Streak</div>
            </div>
          </div>
        </div>

        <!-- Distribution -->
        <div>
          <div class="stats-header">Guess Distribution</div>
          <div class="graph-container" id="guess-graph">
            <!-- Bars injected by JS -->
          </div>
        </div>

      </div>
      <p id="disclaimer"><strong>Disclaimer: This is a fun project to learn coding and has no commercial value. All
          rights
          are with the amazing NYTimes only.</strong></p>
    </div>
  </div>

  <!-- Archive Modal -->
  <div class="modal-overlay" id="archive-modal">
    <div class="modal-content">
      <button class="close-btn">&times;</button>
      <div class="stats-header">Puzzle Archive</div>
      <div id="archive-list" class="archive-list">
        <!-- populated by js -->
      </div>
    </div>
  </div>

  <!-- Settings Modal -->
  <div class="modal-overlay" id="settings-modal">
    <div class="modal-content">
      <button class="close-btn">&times;</button>
      <div class="stats-header">Settings</div>
      <div class="settings-list">
        <div class="setting-item">
          <div class="setting-label">
            <div class="setting-title">Colorblind Mode</div>
            <div class="setting-desc">High contrast colors</div>
          </div>
          <label class="switch">
            <input type="checkbox" id="colorblind-toggle">
            <span class="slider round"></span>
          </label>
        </div>
        <div class="setting-item">
          <div class="setting-label">
            <div class="setting-title">Sound Effects</div>
            <div class="setting-desc">Thumps, dings, and melodies</div>
          </div>
          <label class="switch">
            <input type="checkbox" id="sound-toggle" checked>
            <span class="slider round"></span>
          </label>
        </div>
        <div class="setting-item">
          <div class="setting-label">
            <div class="setting-title">Haptic Feedback</div>
            <div class="setting-desc">Vibrations on mobile</div>
          </div>
          <label class="switch">
            <input type="checkbox" id="haptic-toggle" checked>
            <span class="slider round"></span>
          </label>
        </div>
      </div>
      <p id="disclaimer" style="margin-top: 2rem;"><strong>Enjoy the new Visual & Audio polish!</strong></p>
    </div>
  </div>

  <!-- Help Modal -->
  <div class="modal-overlay" id="help-modal">
    <div class="modal-content help-modal-content">
      <button class="close-btn">&times;</button>
      <div class="stats-header">How to Play</div>
      <p>Guess the word in 6 tries.</p>

      <div class="help-section">
        <div class="help-example">
          <div class="tile correct">W</div>
          <div class="tile">E</div>
          <div class="tile">A</div>
          <div class="tile">R</div>
          <div class="tile">Y</div>
        </div>
        <p><strong>W</strong> is in the word and in the correct spot.</p>
      </div>

      <div class="help-section">
        <div class="help-example">
          <div class="tile">P</div>
          <div class="tile present">I</div>
          <div class="tile">L</div>
          <div class="tile">O</div>
          <div class="tile">T</div>
        </div>
        <p><strong>I</strong> is in the word but in the wrong spot.</p>
      </div>

      <div class="help-section">
        <div class="help-example">
          <div class="tile">V</div>
          <div class="tile">A</div>
          <div class="tile">G</div>
          <div class="tile absent">U</div>
          <div class="tile">E</div>
        </div>
        <p><strong>U</strong> is not in the word in any spot.</p>
      </div>

      <div class="help-section">
        <div class="help-example">
          <div class="tile hinted">A</div>
        </div>
        <p><strong>üí° Hint:</strong> Tap the lightbulb to reveal one correct letter. Available once per puzzle!</p>
      </div>

      <div class="help-section">
        <p><strong>üìÖ Archive:</strong> Play puzzles from the last 14 days by tapping the calendar.</p>
      </div>

      <p class="help-footer">Puzzles reset daily. Use the Archive (üìÖ) to play past games.</p>
    </div>
  </div>

  <!-- Auth Modal -->
  <div class="modal-overlay" id="auth-modal">
    <div class="modal-content">
      <button class="close-btn">&times;</button>
      <div id="auth-signed-out">
        <div class="auth-tabs">
          <button class="auth-tab active" data-tab="login">Login</button>
          <button class="auth-tab" data-tab="signup">Sign Up</button>
        </div>
        <div class="settings-list" style="margin-top: 1.5rem;">
          <div class="auth-form">
            <input type="email" id="auth-email" placeholder="Email" class="auth-input">
            <input type="password" id="auth-password" placeholder="Password" class="auth-input">
            <button id="auth-submit-btn" class="auth-submit-btn">Login</button>

            <div class="auth-divider"><span>OR</span></div>

            <button id="google-login-btn" class="auth-google-btn">
              <svg width="18" height="18" viewBox="0 0 18 18">
                <path
                  d="M17.64 9.2c0-.637-.057-1.251-.164-1.84H9v3.481h4.844c-.209 1.125-.843 2.078-1.796 2.717v2.258h2.908c1.702-1.567 2.684-3.874 2.684-6.615z"
                  fill="#4285F4" />
                <path
                  d="M9 18c2.43 0 4.467-.806 5.956-2.184l-2.908-2.259c-.806.54-1.837.86-3.048.86-2.344 0-4.328-1.584-5.036-3.711H.957v2.332A8.997 8.997 0 0 0 9 18z"
                  fill="#34A853" />
                <path
                  d="M3.964 10.712c-.18-.54-.282-1.117-.282-1.71s.102-1.17.282-1.712V4.958H.957A8.996 8.996 0 0 0 0 9c0 1.452.348 2.827.957 4.042l3.007-2.33z"
                  fill="#FBBC05" />
                <path
                  d="M9 3.58c1.321 0 2.508.454 3.44 1.345l2.582-2.58C13.463.891 11.426 0 9 0A8.997 8.997 0 0 0 .957 4.958L3.964 7.29C4.672 3.163 6.656 3.58 9 3.58z"
                  fill="#EA4335" />
              </svg>
              Sign in with Google
            </button>
          </div>
        </div>
      </div>
      <div id="auth-signed-in" style="display: none;">
        <div class="stats-header">My Profile</div>
        <div class="user-info" style="margin-top: 2rem; text-align: center;">
          <p id="user-email-display" style="font-weight: 600; font-size: 1.1rem; margin-bottom: 0.5rem;"></p>
          <p id="sync-status" class="setting-desc" style="color: #10b981; margin-bottom: 2rem;">‚úÖ Progress is synced to
            the cloud</p>
          <button id="logout-btn" class="auth-submit-btn secondary">Sign Out</button>
        </div>
      </div>
    </div>
  </div>

  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
  <script src="firebase-config.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
  <script src="script.js"></script>
  <div id="version-badge"></div>
  <script src="version.js"></script>
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('service-worker.js')
          .catch(err => console.warn('SW registration failed:', err));
      });
    }
  </script>
</body>

</html>